import chainlit as cl
import chatbot as cb
import prompts
import vector_store_func as vsf
import database as db

store_database=None
chain=cb.joke_chain

                                              #Buttons in chat

# @cl.action_callback("Joker Bot")
# async def joker_chain_select():
#     await cl.Message(content="Raffays personal joker at your service").send()

# @cl.action_callback("Haider Bot")
# async def haider_chain_select():
#     await cl.Message(content="Ask me anything about the one and only Mr Haider Sultan").send()
#     global chain
#     chain=cb.haider_chain

# start_buttons=[    
#     cl.Action(name="Joker Bot", value="joker_chain", action=joker_chain_select),
#     cl.Action(name="Haider Bot", value="haider_chain", action=haider_chain_select)
#     ]

# @cl.on_chat_start
# async def chat_start():
#     await cl.Message(content="Select chatbot:",actions=start_buttons).send()


@cl.set_chat_profiles
async def chat_profiles():
    return [
        cl.ChatProfile(name="Haider Bot", markdown_description="Chatbot of the one and only", icon="data:image/jpeg;base64,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"),
        cl.ChatProfile(name="Joker Bot", markdown_description="Chatbot for Dmart Customers" , icon="data:image/jpeg;base64,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"),
        cl.ChatProfile(name="Dmart Customer Assistant", markdown_description="Chatbot for Dmart Customers", icon="data:image/jpeg;base64,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")
    ]

@cl.on_chat_start
async def on_chat_start():
    selected_chat_profile=cl.user_session.get("chat_profile")
    await cl.Message(content=f"You have selected {selected_chat_profile}").send()
    global chain

    if selected_chat_profile=="Haider Bot":
        chain=cb.haider_chain
        cb.chat_history=[]
    
    elif selected_chat_profile=="Joker Bot":
        chain=cb.joke_chain
        cb.chat_history=[]

    elif selected_chat_profile=="Dmart Customer Assistant":
        chain=cb.dmart_chain
        cb.chat_history=[]
        global store_database
        store_database = vsf.load_store_database(db.database_path)

@cl.on_message
async def on_message(message: cl.Message):
    global chain

    if chain==cb.dmart_chain:
        context = vsf.extract_store_context(store_database, message.content)


        user_input={
            "chat_history": cb.chat_history,
            "context":context,
            "input":message.content
        }

    else: 
        user_input={
            "chat_history": cb.chat_history,
            "input":message.content
        }


    await cb.run_chatbot(user_input,chain)